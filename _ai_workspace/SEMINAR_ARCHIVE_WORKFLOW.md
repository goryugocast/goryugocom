# セミナーアーカイブ整理ワークフロー

## 前提条件

- ✅ 動画の文字起こしが完了している
- ✅ アーカイブファイルに文字起こし全文が埋め込まれている

## 処理手順（4ステップ）

### ステップ1: セミナー構成セクション作成

**❗❗重要**: 元の「## 文字起こしデータ（SRT形式）」セクション以降は**絶対に削除しない**！

**処理内容**:
1. アーカイブファイル全体を読み、内容を分析
2. 6個程度の主要セクションを特定
3. 各セクションに詳細な要約（200-400文字）を付ける
4. YAMLフロントマターの後に「## セミナー構成」セクションを追加
5. **元の文字起こしデータ（## 文字起こしデータ（SRT形式）以降）は保持**

**セクション見出しの形式**（重要）:
```markdown
### [1. セクションタイトル - サブタイトル](URL?timestamp=秒数)
**時間**: HH:MM:SS ～

[200-400文字の詳細な要約]
```

**例**:
```markdown
### [1. イントロダクション - 今日のセミナーの流れ](https://knowledgestuck.substack.com/p/8?timestamp=0)
**時間**: 00:00:00 ～

セミナーの目標と流れを説明。1時間でChatGPTを使う気になることが目標...
```

**正しいファイル構造**:
1. YAMLフロントマター
2. **## セミナー構成**（新規追加、6セクション）
3. **## このセミナーから抽出されたアトミックノート**（後で追加）
4. **---**（区切り線）
5. **## 文字起こしデータ（SRT形式）**（元のデータを保持）
6. **```srt ... ```**（元の3000-5000行をそのまま残す）

**結果**: セミナー構成セクションが追加され、元データも保持される

---

### ステップ2: アトミックノート作成

**処理内容**:
1. アーカイブファイルの内容を分析
2. 15-25個のアトミックノートを作成
3. YAMLフロントマター（project: an, title, topic）を設定
4. 本文を200-400文字程度で執筆
5. 出典リンク（Markdown形式）を追加

**出典リンクの形式**（重要）:
```markdown
## 出典・参照

- [セミナータイトル](URL)
  - [HH:MM:SS](URL?timestamp=秒数) - 簡単な説明
```

**例**:
```markdown
## 出典・参照

- [『アトミック・シンキング』実践セミナー8動画アーカイブ](https://knowledgestuck.substack.com/p/8)
  - [00:04:00](https://knowledgestuck.substack.com/p/8?timestamp=240) - ChatGPTのイメージ
```

**結果**: 15-25個のアトミックノートファイル作成

---

### ステップ3: アーカイブにリンク追加

**処理内容**:
アーカイブファイルのアトミックノートセクションに、作成したノートへのwikilinksを追加

**重要**: 正しいフォーマットを厳守すること！

**正しいフォーマット**:
```markdown
## このセミナーから抽出されたアトミックノート

### カテゴリ1
- [[ノート1]] - 一行説明
- [[ノート2]] - 一行説明

### カテゴリ2
- [[ノート3]] - 一行説明
...
```

**フォーマットのルール**:
1. ✅ **カテゴリー見出しを使う**: `### カテゴリ名`
2. ✅ **箇条書きリスト**: `-` を使う（番号付き `1. 2. 3.` は ❌）
3. ✅ **説明を付ける**: `- [[ノート]] - 簡潔な説明`
4. ✅ **カテゴリーでグループ化**: 関連するノートをまとめる

**悪い例（間違い）**:
```markdown
## このセミナーから抽出されたアトミックノート

1. [[ノート1]]
2. [[ノート2]]
3. [[ノート3]]
```

**良い例（正しい）**:
```markdown
## このセミナーから抽出されたアトミックノート

### やる気とモチベーション
- [[面倒臭いことをやる気にさせる仕組み]] - ロギング、準備、記録の3つの解決策
- [[書くことでやる気を出す]] - なんとなく書くことで仕事が進む

### Obsidian機能
- [[ワークスペース機能で環境を切り替える]] - 用途ごとに画面レイアウトを切り替え
```

**結果**: アーカイブから各ノートへのナビゲーション確立

---

### ステップ4: 完了確認

**チェック項目**:
- [ ] セミナー構成セクションが追加されている（6セクション程度）
- [ ] 元の文字起こしデータ（## 文字起こしデータ（SRT形式）以降）が保持されている
- [ ] 15-25個のアトミックノートが作成されている
- [ ] アーカイブにアトミックノートリンクが追加されている
- [ ] YAMLフロントマターが正しい
- [ ] ks007の形式と統一されている

---

## 所要時間

- ステップ1: 5-10分（エージェント）
- ステップ2: 5-10分（エージェント、バックグラウンド）
- ステップ3: 5分（手動）
- ステップ4: 2分（確認）

**合計**: 約20-30分/セミナー

---

## 重要な注意点

1. **❗❗文字起こしデータは絶対に削除しない** - 「## 文字起こしデータ（SRT形式）」以降は必ず保持
2. **セミナー構成は追加するだけ** - 元データの置き換えではない
3. **ks007の形式と統一** - 同じ構造にする
4. **出典はMarkdown形式** - `[タイトル](URL?timestamp=秒数)`
5. **エージェントはバックグラウンド実行** - 並行処理で効率化

---

## 技術的なTips（大きなファイルの処理）

### 問題: Read toolのトークン制限（25000トークン）

一部のセミナーは文字起こしが非常に長く（例: ks010は55568トークン）、Read toolで一度に読み込めない。

### 解決方法

**1. bashコマンドでタイムスタンプを抽出してセクション構成を把握**:
```bash
# 主要なタイムスタンプを抽出
grep -n "00:[123][05]:" ファイル名 | head -10
grep -n "01:0[05]:" ファイル名 | head -10

# 特定の行範囲を表示
head -100 ファイル名
tail -100 ファイル名
```

**2. 元の文字起こしデータを保持しながらセミナー構成を追加**:

**重要**: Editツールを使って、「## 文字起こしデータ（SRT形式）」の**前**にセミナー構成セクションを挿入する。
元のSRTデータは絶対に削除しない。

```bash
# まず元ファイルを読んで、文字起こしデータの行番号を確認
grep -n "^## 文字起こしデータ" "web/src/content/ks/セミナー/ファイル名.md"

# Editツールで、YAMLフロントマターの後にセミナー構成セクションを追加
# 文字起こしデータ部分は保持する
```

**3. 行数確認で圧縮率を検証**:
```bash
wc -l "web/src/content/ks/セミナー/ファイル名.md"  # 処理前後で比較
```

### 注意事項

- **元のSRTデータは削除しない**: 「## 文字起こしデータ（SRT形式）」以降は保持
- **セミナー構成は追加**: YAMLフロントマターの後に挿入
- bashコマンドでタイムスタンプを抽出して構成を把握
- 1セミナーあたり約10-15分で完了

### エージェントのレート制限対策

エージェントが使えない場合でも、Write toolで直接アトミックノートを作成可能：
- 1ノートあたり約2-3分
- 20個のノートで約40-60分
- レート制限中でも作業継続できる
