# Claude Code への指示（必読）

## このファイルについて

**運用方針**:
- **こまめに更新する** - 重要な教訓があったらすぐ追記
- **簡潔に保つ** - 詳細はdailylogに書く、ここは要点のみ
- このファイルが長くなりすぎないよう、常にバランスを取る


## セッション開始時の必須チェックリスト

毎回、必ずこの順序で実行すること：

1. ✅ **このファイル（`CLAUDE.md`）を読む**
2. ✅ **`_ai_workspace/README.md` を読む** - プロジェクト全体像
3. ✅ **最新のデイリーログを読む** - `_ai_workspace/dailylog/AI_YYYY-MM-DD.md`（日付降順で最新）
4. ✅ **現在の状況を把握してから作業開始**

## 絶対にやってはいけないこと

❌ **推測で動かない**
- 「たぶんこうだろう」で新しいファイル/フォルダを作らない
- 5秒で確認できることは必ず確認する
- サマリーに書いてあることを優先する

❌ **既存の構造を無視しない**
- 新しいファイルを作る前に、必ず `ls` または `Glob` で既存を確認
- 既存の命名規則・場所を必ず尊重
- 勝手に新しいフォルダ構造を作らない

❌ **ドキュメントより記憶を優先しない**
- 記憶や推測ではなく、必ずドキュメントを確認
- 不明な点は推測せず、ユーザーに聞く

❌ **過去の記録を確認しない**
- ユーザーが「以前やった」「計画した」「考えた」と言及した場合、必ずdailylogを検索
- `_ai_workspace/dailylog/` から正確な情報を掘り返す
- 記憶や推測に頼らず、記録を確認してから回答

❌ **`/tmp/` に重要なファイルを保存しない**
- `/tmp/` は再起動で消える一時ディレクトリ
- 重要なドキュメント・進捗記録は必ず `_ai_workspace/` に保存
- スクリプトなど一時的なものだけ `/tmp/` を使用

❌ **`_ai_workspace/` に不要なファイルを増やさない**
- **dailylogは記録として重要 → たくさん残す**
- **それ以外は最小限にする**
- 進捗レポートなどは dailylog に書けば十分（別ファイル不要）
- 残すべきファイル：README.md、ワークフロー、テンプレートなど「手順書」のみ
- 重複したドキュメントは作らない

❌ **間違えてもワークフローを改善しない**
- ❌ 間違いを認識しても放置する
- ❌ 技術的改善を発見しても記録しない
- ✅ **間違えたら必ずワークフローを改善する**
- ✅ **効率的な方法を発見したらワークフローに記録する**
- ✅ ワークフローファイル（`SEMINAR_ARCHIVE_WORKFLOW.md` など）を即座に更新
- ✅ 同じミスを繰り返さないように明確な手順を追記
- ✅ 技術的改善・効率化のTipsもワークフローに追加
- ✅ dailylogに「学んだこと」として記録
- ✅ CLAUDE.mdの「重要な教訓」に追記

**改善の種類**:
- ミスの修正（間違った手順を正しい手順に）
- 技術的改善（より効率的な方法の発見）
- 新しい問題の解決方法（トークン制限の回避など）
- ツールの使い方の工夫（bashコマンド活用など）

## 重要な教訓

### 推測で動かない（詳細: [[AI_2025-12-27]]）
- サマリーに書いてある情報を無視しない
- 既存のファイル構造を必ず確認する（`ls`、`Glob`）
- 5秒で確認できることは必ず確認

### ファイル保存場所を間違えない（詳細: [[AI_2025-12-27]]）
- 重要なドキュメントは `_ai_workspace/` に保存
- `/tmp/` は一時ファイルのみ
- dailylog以外は最小限に（手順書のみ残す）

### 元データを削除しない（詳細: [[AI_2025-12-28]]）
- **セミナーの文字起こしデータ（## 文字起こしデータ（SRT形式）以降）は絶対に削除しない**
- セミナー構成は「追加」であり「置き換え」ではない
- ファイルを上書きする前に既存ファイルを読んで正しい形式を確認

### 改善はワークフローに記録（詳細: [[AI_2025-12-27]]）
- 間違えたら即座にワークフローを修正
- 技術的改善を発見したらワークフローに追記
- CLAUDE.mdとdailylogの両方に記録

## デイリーログの記録習慣（重要）

デイリーログは、単なる作業記録ではなく、AIと人間の協業プロセスにおける意思決定の根拠、問題解決の経緯、そして学びを記録する重要なドキュメントです。後から参照した際に「何が起こったのか」「なぜそうなったのか」が明確に理解できる、**必要十分な情報量と粒度を保ちつつ、無駄な表現や重複を避ける**バランスを重視します。

**場所**: `_ai_workspace/dailylog/`
**ファイル名**: `AI_YYYY-MM-DD.md`（例: `AI_2025-12-27.md`）

**記録のタイミング**:
1. ✅ **セッション開始時**：前回のログを確認。
2. ✅ **主要なタスク完了時**：ひとまとまりの作業が完了したら即座に記録を更新（セッション終了まで待たない）。
3. ✅ **重要な意思決定時**：検討プロセスや決定理由などを簡潔に記録。
4. ✅ **セッション終了時**：最終的な状況と次回の開始方法を記録。

**記録の構造と内容（重要）**:

-   **`[[YYYY-MM-DD]]`**: ログの先頭に、ごりゅごさんのデイリーノートへのリンクを貼る。
-   `# 作業ログ YYYY-MM-DD`: その日の作業ログタイトル。
-   `## 📋 概要（先頭数行で状況を把握）`:
    -   その日の主要な完了タスク、進行中のタスク、次に着手するタスクを箇条書きで簡潔に記述。
    -   全体の進捗状況を把握するための要約とし、冗長な詳細や過去の経緯は含めない。
-   `## セッション詳細`:
    -   その日に発生した**主要なイベント/タスクを時系列で記載**。
    -   各タスクの成果は簡潔に記述するが、**重要な意思決定の背景、ユーザーからの指示（原文または要約）、検討プロセス**など、**後から参照したときに「なぜそうなったのか」が理解できる文脈情報**は、過度に冗長にならない範囲で保持する。
    -   **技術的な実装内容や具体的なコード**については、その日の作業における**核心的な変更点や解決策を理解するために必要最低限のコード抜粋**（例：変更された行、主要な関数定義など）や、関連ファイルのパスを記載する。全コード記述は避ける。
    -   「学んだこと」や「重要な気づき」は、その日の作業で得られた教訓として、`セッション詳細`の末尾にまとめて記載する。
-   `## 累計進捗`:
    -   プロジェクト全体の数値的な進捗（例: 処理済みセミナー数、アトミックノート総数）を正確かつ一貫性のある形式で集約。
-   `## 次のステップ`:
    -   その日の作業完了後、次に何を行うべきかを明確に記述。`NEXT_STEPS.md`の内容と連携させる。

**記録の「バランス」について**:
-   **冗長ではないこと**: 詳細すぎる記述（全アトミックノートリスト、長大なコードスニペット）や重複表現は避ける。
-   **不足がないこと**: 後から「なぜこうなった？」と疑問に思わないよう、意思決定の背景や重要な文脈は記録する。
-   **再現性**: ログを読んだ第三者や未来の自分が、その日の作業のハイライトを追体験し、必要であれば同様の判断や手順を理解できる程度の粒度を目指す。

詳細は `_ai_workspace/README.md` の「AI作業ログの記録習慣（重要）」参照。

## 主要ドキュメント

- `_ai_workspace/README.md` - プロジェクト全体像（簡潔な入口）
- `_ai_workspace/SITE_PLAN.md` - サイト全体計画（最重要・まずこれを読む）
- `_ai_workspace/ATOMIC_NOTES.md` - アトミックノート設計・運用
- `_ai_workspace/SEMINAR_ARCHIVE_WORKFLOW.md` - セミナー処理ワークフロー
- `_ai_workspace/dailylog/` - 作業ログ（日々の記録）

## プロジェクトスコープ（重要）

**Obsidianワークスペース全体構造**:
```
Obsidian_local/          ← ユーザーの日常作業環境
  ├── daily/             ← デイリーノート
  ├── notes/             ← 通常のノート
  ├── goryugocom/        ← 公開プロジェクト（このフォルダ）★
  └── 個別ファイル       ← 執筆中の下書き
```

**作業対象**:
- ✅ `goryugocom/` - Astro公開に関わる部分のみ
- ❌ Obsidian_local/ 全体 - ユーザーの個人的な作業環境には触れない

**goryugocomの位置づけ**:
- 公開プロジェクトとして独立
- ドメイン名（goryugo.com）との対応
- git管理の単位
- バックアップの単位

**ワークフロー**:
```
Obsidian_local/ 直下で執筆（下書き）
  ↓ 完成
goryugocom/web/src/content/ に移動
  ↓
Astroでビルド・公開
```

## プロジェクトの現在地（2025-12-29時点）

**プロジェクト目的**: 読者が感動・共感して有料会員に入りたくなるサイトを作る

**完了**:
- ✅ サイト計画の整理・明確化（SITE_PLAN.md作成）
- ✅ ドキュメント構成の整理（_ai_workspace/を5ファイルに集約）
- ✅ ポータルサイト基本機能（記事リスト、フィルター、検索、用語集タブ）
- ✅ 全セミナー処理完了 (40件 + ksbasic、アトミックノート755個作成済み)
- ✅ `ks035-040`の`title`/`subtitle`構造の統一を確認（変更不要）

**次の優先順位**:
1. 動画アーカイブページの改善（ほぼ完成、細部調整）
2. アトミックノート一覧・個別ページ実装
3. FAQページ作成
4. テストビルド・デプロイ設計

詳細は `_ai_workspace/SITE_PLAN.md` および `_ai_workspace/dailylog/AI_2025-12-29.md` 参照。

---

**最終更新**: 2025-12-29
**次回更新**: 重要な教訓があったとき、または方針が変わったとき
